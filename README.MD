# NFL Data Engineering Pipeline ğŸˆ

A comprehensive data engineering solution for NFL analytics using AWS S3, nfl-data-py, and the Medallion Architecture pattern.

**ğŸ“Š Current Status: Bronze Layer Complete, Ready for Silver Layer Development**

## ğŸ¯ Project Overview

This project implements a complete NFL data pipeline that:
- **Ingests** raw NFL data from nfl-data-py API âœ… **COMPLETE**
- **Transforms** data through Bronze â†’ Silver â†’ Gold layers â³ **IN PROGRESS**  
- **Stores** data in AWS S3 with proper partitioning âœ… **COMPLETE**
- **Enables** advanced NFL analytics and insights ğŸ”„ **PLANNED**

## ğŸ† Current Achievements

### âœ… **Bronze Layer Operational** 
- **16 NFL games** + **2,816 plays** successfully ingested (2023 Week 1)
- **0.21 MB** of structured data stored in S3 with proper partitioning
- **Command-line interface** for data ingestion
- **Full validation suite** ensuring data quality

### ğŸ› ï¸ **Infrastructure Ready**
- **AWS S3 Integration**: 3 buckets configured (raw, refined, trusted)
- **Python Environment**: Complete with nfl-data-py, boto3, pandas
- **Testing Suite**: AWS connectivity, NFL API, data validation tests
- **Documentation**: Comprehensive setup guides and API documentation

## ğŸ¯ **Next Session Goals**

### ğŸ¥ˆ **Silver Layer Development** (Recommended)
Transform Bronze data into clean, validated datasets:
- Data quality pipeline implementation
- NFL business rule validations  
- Standardization and enrichment
- S3 Silver layer storage (`s3://nfl-refined/`)

### ğŸ“ˆ **Alternative: Bronze Layer Expansion**
Add more data variety for richer Silver layer development:
- Additional weeks and seasons
- Player statistics integration
- Team performance data
- Historical trend analysis

## ğŸ—ï¸ Architecture

```
ğŸ“Š Data Sources          ğŸ¥‰ Bronze Layer         ğŸ¥ˆ Silver Layer         ğŸ¥‡ Gold Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   nfl-data-py   â”‚ â”€â”€â†’  â”‚   Raw NFL Data  â”‚ â”€â”€â†’  â”‚  Cleaned Data   â”‚ â”€â”€â†’  â”‚  Aggregated     â”‚
â”‚   â€¢ Games       â”‚      â”‚   â€¢ Parquet     â”‚      â”‚   â€¢ Validated   â”‚      â”‚  Analytics      â”‚
â”‚   â€¢ Play-by-playâ”‚      â”‚   â€¢ Partitioned â”‚      â”‚   â€¢ Enriched    â”‚      â”‚   â€¢ KPIs        â”‚
â”‚   â€¢ Team Stats  â”‚      â”‚   â€¢ Timestamped â”‚      â”‚   â€¢ Standardizedâ”‚      â”‚   â€¢ Reports     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                          â”‚                         â”‚
                            s3://nfl-raw             s3://nfl-refined         s3://nfl-trusted
```

## ğŸš€ Quick Start

### Prerequisites
- Python 3.9+
- AWS Account with S3 buckets
- AWS CLI configured

### 1. Environment Setup
```bash
# Clone the repository
git clone https://github.com/gesmith0606/nfl_data_engineering.git
cd nfl_data_engineering

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\\Scripts\\activate

# Install dependencies
pip install -r requirements.txt
```

### 2. AWS Configuration
```bash
# Configure AWS credentials
aws configure

# Or set environment variables in .env file
cp .env.example .env
# Edit .env with your AWS credentials
```

### 3. Test Setup
```bash
# Test AWS connectivity
python test_aws_connectivity.py

# Test NFL data integration
python test_nfl_data.py
```

### 4. Run Data Ingestion
```bash
# Ingest game schedules
python bronze_ingestion_simple.py --season 2023 --week 1 --data-type schedules

# Ingest play-by-play data
python bronze_ingestion_simple.py --season 2023 --week 1 --data-type pbp

# View ingested data
python list_bronze_contents.py
```

## ğŸ“ Project Structure

```
nfl_data_engineering/
â”œâ”€â”€ ğŸ“„ README.md                          # This file
â”œâ”€â”€ ğŸ“„ requirements.txt                   # Python dependencies
â”œâ”€â”€ ğŸ“„ .env                              # Environment variables
â”œâ”€â”€ ğŸ“„ development_tasks.md              # Development roadmap
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“‚ src/                              # Core source code
â”‚   â”œâ”€â”€ ğŸ“„ config.py                     # Configuration settings
â”‚   â”œâ”€â”€ ğŸ“„ utils.py                      # Utility functions  
â”‚   â””â”€â”€ ğŸ“„ nfl_data_integration.py       # NFL data fetching & validation
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“‚ notebooks/                        # Data processing notebooks
â”‚   â”œâ”€â”€ ğŸ“„ bronze_ingestion.py           # Raw data ingestion
â”‚   â”œâ”€â”€ ğŸ“„ silver_transformation.py      # Data cleaning & validation
â”‚   â””â”€â”€ ğŸ“„ gold_aggregation.py           # Analytics & aggregation
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“‚ tests/                           # Unit tests
â”‚   â””â”€â”€ ğŸ“„ test_utils.py                # Utility function tests
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“‚ scripts/                         # Standalone scripts
â”‚   â”œâ”€â”€ ğŸ“„ bronze_ingestion_simple.py   # CLI data ingestion
â”‚   â”œâ”€â”€ ğŸ“„ list_bronze_contents.py      # S3 content viewer
â”‚   â””â”€â”€ ğŸ“„ test_*.py                    # Various test scripts
â””â”€â”€ 
â””â”€â”€ ğŸ“‚ docs/                           # Documentation
    â”œâ”€â”€ ğŸ“„ AWS_IAM_SETUP_INSTRUCTIONS.md  # AWS configuration guide
    â”œâ”€â”€ ğŸ“„ BRONZE_LAYER_DATA_INVENTORY.md # Current data catalog
    â”œâ”€â”€ ğŸ“„ IMPLEMENTATION_SUMMARY.md      # Technical implementation details
    â””â”€â”€ ğŸ“„ project_details.md             # Project specifications
```

## ğŸ¥‰ Bronze Layer (Raw Data)

**Purpose:** Ingest raw NFL data with minimal processing  
**Storage:** `s3://nfl-raw/`  
**Format:** Parquet files with partitioning  
**Current Status:** âœ… **Active with 2023 Week 1 Data**

### ğŸ“Š Current Data Inventory:
| Data Type | Records | Size | Season | Week | Status |
|-----------|---------|------|--------|------|--------|
| **Games** | 16 games | 0.03 MB | 2023 | 1 | âœ… Complete |
| **Plays** | 2,816 plays | 0.18 MB | 2023 | 1 | âœ… Complete |
| **Total** | - | **0.21 MB** | - | - | âœ… Ready for Silver |

*ğŸ“‹ [View detailed data inventory](docs/BRONZE_LAYER_DATA_INVENTORY.md)*

### Supported Data Types:
- **Game Schedules**: Season schedules with scores, dates, teams (50 columns)
- **Play-by-Play**: Detailed play data with yards, downs, players (32 columns)  
- **Team Stats**: Team information and statistics (available but not yet ingested)

### Partitioning Structure:
```
s3://nfl-raw/
â”œâ”€â”€ games/season=2023/week=1/schedules_20240815_123456.parquet
â”œâ”€â”€ plays/season=2023/week=1/pbp_20240815_123456.parquet
â””â”€â”€ teams/season=2023/teams_20240815_123456.parquet
```

## ğŸ¥ˆ Silver Layer (Cleaned Data)

**Purpose:** Clean, validate, and enrich Bronze data
**Storage:** `s3://nfl-refined/`
**Status:** ğŸš§ In Development

### Planned Transformations:
- Data type validation and correction
- Missing value handling
- Player name standardization
- Team abbreviation consistency
- Date/time standardization

## ğŸ¥‡ Gold Layer (Analytics Ready)

**Purpose:** Business-ready aggregated data
**Storage:** `s3://nfl-trusted/`  
**Status:** ğŸ“‹ Planned

### Planned Aggregations:
- Team performance metrics
- Player statistics by season/week
- Game outcome predictions
- Historical trend analysis

## ğŸ› ï¸ Key Components

### 1. NFL Data Integration (`src/nfl_data_integration.py`)
- Fetches data from nfl-data-py API
- Handles rate limits and errors
- Validates data quality
- Supports multiple data types

### 2. Bronze Layer Ingestion (`bronze_ingestion_simple.py`)
- Command-line interface for data ingestion
- Configurable season, week, and data type
- Automatic S3 upload with proper partitioning
- Built-in data validation

### 3. AWS S3 Integration
- Full CRUD operations tested
- Parquet format support
- Proper IAM permissions configured
- Cross-region connectivity (us-east-2)

## ğŸ“Š Current Status

### âœ… Completed (August 15, 2025)
- [x] **Task 1.1**: Local Environment Configuration
- [x] **Task 1.2**: AWS S3 Connectivity Testing  
- [x] **Task 2.1**: NFL Data Integration

### ğŸ“Š Bronze Layer Data Status:
| Metric | Value | Details |
|--------|-------|---------|
| **Total Files** | 2 | Games + Plays data |
| **Total Size** | 0.21 MB | Parquet compressed |
| **Game Records** | 16 games | 2023 Season Week 1 |
| **Play Records** | 2,816 plays | Detailed play-by-play |
| **Data Quality** | âœ… Validated | All required fields present |
| **Partitioning** | âœ… Active | `season=YYYY/week=WW` structure |

*ğŸ“‹ [Complete data inventory and schema details](docs/BRONZE_LAYER_DATA_INVENTORY.md)*

### ğŸš§ In Progress
- **Task 2.2**: S3 Upload Implementation Enhancement
- **Task 2.3**: Bronze Layer CLI Enhancement

### ğŸ“‹ Planned
- Silver Layer Data Transformation
- Gold Layer Analytics Aggregation
- Databricks Integration
- Automated Pipeline Orchestration

## ğŸ”§ Configuration

### Environment Variables (.env)
```bash
# AWS Configuration
AWS_REGION=us-east-2
AWS_ACCOUNT_ID=512821312570
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key

# S3 Buckets
S3_BUCKET_BRONZE=nfl-raw
S3_BUCKET_SILVER=nfl-refined  
S3_BUCKET_GOLD=nfl-trusted

# NFL Data Settings
DEFAULT_SEASON=2024
DEFAULT_WEEK=1
LOG_LEVEL=INFO
```

## ğŸ§ª Testing

```bash
# Test AWS connectivity
python test_aws_connectivity.py

# Test NFL data fetching
python test_nfl_data.py

# Test S3 full operations
python test_s3_full_operations.py

# Run unit tests
python -m pytest tests/
```

## ğŸ“ˆ Usage Examples

### Basic Data Ingestion
```bash
# Ingest current week games
python bronze_ingestion_simple.py --season 2024 --week 1 --data-type schedules

# Ingest historical play-by-play
python bronze_ingestion_simple.py --season 2023 --week 1 --data-type pbp
```

### Check Ingested Data
```bash
# View Bronze layer contents
python list_bronze_contents.py

# Test data quality
python src/nfl_data_integration.py
```

## ğŸš€ Future Enhancements

- **Real-time Data Ingestion**: Live game data streaming
- **Advanced Analytics**: Player performance models
- **Visualization Dashboard**: Interactive NFL analytics
- **API Layer**: REST API for data access
- **Data Lineage**: Track data flow and transformations
- **Cost Optimization**: S3 lifecycle policies and compression

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ™ Acknowledgments

- **nfl-data-py**: For providing excellent NFL data API
- **AWS**: For cloud infrastructure
- **Apache Parquet**: For efficient data storage
- **NFL**: For the amazing game that makes this data possible! ğŸˆ

---

**Built with â¤ï¸ for NFL Analytics**
